#!/bin/bash

# ðŸš€ Ø³ÙƒØ±ÙŠØ¨Øª Ø§Ù„Ø±ÙØ¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù€ GitHub - Sperm Analyzer AI
# Automatic GitHub Deployment Script - Sperm Analyzer AI

echo "ðŸš€ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±ÙØ¹ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù„Ù‰ GitHub..."
echo "======================================================"

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ git
if ! command -v git &> /dev/null; then
    echo "âŒ Ø®Ø·Ø£: Git ØºÙŠØ± Ù…Ø«Ø¨Øª. ÙŠØ±Ø¬Ù‰ ØªØ«Ø¨ÙŠØª Git Ø£ÙˆÙ„Ø§Ù‹."
    echo "ØªØ­Ù…ÙŠÙ„ Ù…Ù†: https://git-scm.com/downloads"
    exit 1
fi

# Ø·Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª GitHub
echo "ðŸ“ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª GitHub Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ:"
read -p "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ GitHub: " GITHUB_USERNAME
read -p "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ (Ø§ØªØ±ÙƒÙ‡ ÙØ§Ø±ØºØ§Ù‹ Ù„Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ 'sperm-analyzer-ai'): " REPO_NAME

# ØªØ¹ÙŠÙŠÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
if [ -z "$REPO_NAME" ]; then
    REPO_NAME="sperm-analyzer-ai"
fi

# Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ø¬Ù„Ø¯
if [ ! -d "sperm-analyzer-ui" ]; then
    echo "âŒ Ø®Ø·Ø£: Ù…Ø¬Ù„Ø¯ 'sperm-analyzer-ui' ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯."
    echo "ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªÙ†ÙÙŠØ° Ù‡Ø°Ø§ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹."
    exit 1
fi

echo ""
echo "ðŸ“‚ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø¬Ù„Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..."
cd sperm-analyzer-ui

# ØªÙ‡ÙŠØ¦Ø© Git repository
echo "ðŸ”§ ØªÙ‡ÙŠØ¦Ø© Ù…Ø³ØªÙˆØ¯Ø¹ Git Ù…Ø­Ù„ÙŠ..."
git init

# Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Git (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
echo "ðŸ‘¤ ØªÙƒÙˆÙŠÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Git..."
git config user.name "$GITHUB_USERNAME"
read -p "Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù€ Git: " GIT_EMAIL
git config user.email "$GIT_EMAIL"

# Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
echo "ðŸ“ Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹..."
git add .

# Ø¥Ù†Ø´Ø§Ø¡ first commit
echo "ðŸ’¾ Ø¥Ù†Ø´Ø§Ø¡ commit Ø£ÙˆÙ„ÙŠ..."
git commit -m "Initial commit: Sperm Analyzer AI Android App

ðŸŽ¯ Features:
- Complete bilingual UI (Arabic/English) with RTL support
- 4 fully functional screens (Main, Analysis, Results, Settings)
- Material Design 3 with medical-grade aesthetic
- Ready for Koyb.com backend integration
- GitHub Actions for automatic APK building

ðŸ¥ Medical Features:
- Professional clinical design
- Sperm analysis results display
- Export functionality (PDF/CSV)
- Configurable backend URL

ðŸ”§ Technical:
- Jetpack Compose + Kotlin
- Mock data for testing
- Responsive design (360x800)
- Android SDK 23+ support"

# Ø±Ø¨Ø· Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¨Ù€ GitHub
GITHUB_REPO_URL="https://github.com/$GITHUB_USERNAME/$REPO_NAME.git"
echo "ðŸ”— Ø±Ø¨Ø· Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¨Ù€ GitHub: $GITHUB_REPO_URL"
git remote add origin $GITHUB_REPO_URL

# Ø¹Ø±Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
echo ""
echo "âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­!"
echo ""
echo "ðŸ”¶ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© (ÙŠØ¯ÙˆÙŠØ©):"
echo "1. Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ GitHub.com ÙˆØ³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„"
echo "2. Ø£Ù†Ø´Ø¦ Ù…Ø³ØªÙˆØ¯Ø¹ Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³Ù…: $REPO_NAME"
echo "3. Ø§Ø¬Ø¹Ù„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¹Ø§Ù… (Public) Ø£Ùˆ Ø®Ø§Øµ (Private)"
echo "4. Ù„Ø§ ØªØ¶Ø¹ Ù…Ù„ÙØ§Øª README Ø£Ùˆ .gitignore (Ù…ÙˆØ¬ÙˆØ¯Ø© Ø¨Ø§Ù„ÙØ¹Ù„)"
echo "5. Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ØŒ Ù†ÙØ° Ø§Ù„Ø£Ù…Ø± Ø§Ù„ØªØ§Ù„ÙŠ:"
echo ""
echo "   git push -u origin main"
echo ""
echo "ðŸ¤– GitHub Actions Ø³ÙŠØ¨Ø¯Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¨Ù†Ø§Ø¡ APK ÙÙˆØ± Ø±ÙØ¹ Ø§Ù„ÙƒÙˆØ¯!"
echo ""
echo "ðŸ“± Ø³ØªØ¬Ø¯ Ù…Ù„ÙØ§Øª APK ÙÙŠ:"
echo "   â€¢ GitHub â†’ Actions â†’ Ø£Ø­Ø¯Ø« workflow â†’ Artifacts"
echo "   â€¢ Ø£Ùˆ ÙÙŠ Releases Ø¥Ø°Ø§ ÙƒØ§Ù† push Ù„Ù„Ù€ main branch"
echo ""

# Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙƒØ±ÙŠØ¨Øª push Ù…Ù†ÙØµÙ„
cat > push_to_github.sh << 'EOF'
#!/bin/bash
echo "ðŸš€ Ø±ÙØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¥Ù„Ù‰ GitHub..."
git push -u origin main

if [ $? -eq 0 ]; then
    echo "âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­!"
    echo "ðŸ”— Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ù…Ø³ØªÙˆØ¯Ø¹ GitHub Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ø¨Ù†Ø§Ø¡ APK"
    echo "â° Ø³ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„Ø¨Ù†Ø§Ø¡ 5-10 Ø¯Ù‚Ø§Ø¦Ù‚ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹"
else
    echo "âŒ ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹"
    echo "ðŸ’¡ ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¹Ù„Ù‰ GitHub Ø£ÙˆÙ„Ø§Ù‹"
fi
EOF

chmod +x push_to_github.sh

echo "ðŸ“œ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙƒØ±ÙŠØ¨Øª 'push_to_github.sh' Ù„Ø±ÙØ¹ Ø§Ù„ÙƒÙˆØ¯"
echo ""
echo "ðŸ Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:"
echo "1. Ø£Ù†Ø´Ø¦ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¹Ù„Ù‰ GitHub"
echo "2. Ù†ÙØ°: ./push_to_github.sh"
echo ""
echo "ðŸŽ‰ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ APK ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 5-10 Ø¯Ù‚Ø§Ø¦Ù‚!"